import { Meta } from '@storybook/addon-docs';

<Meta
    title="Implementation/Drupal - Filters"
    parameters={{
        layout: 'padded',
        viewMode: 'docs',
        previewTabs: { canvas: { hidden: true } },
    }}
/>

# Twig filters list

<br />
<br />

We support all filters documented in **[Twig 1.x](https://twig.symfony.com/doc/1.x/)** and all theses **custom filters** found in:

__Drupal Twig__

Docs:
- https://www.drupal.org/docs/theming-drupal/twig-in-drupal/filters-modifying-variables-in-twig-templates
- https://www.npmjs.com/package/twig-drupal-filters

Filters:
-   `t` or `trans`
-   `placeholder`
-   `without`
-   `clean_class`
-   `clean_id`
-   `render`
-   `path`
-   `url`
-   `format_date`
-   `drupal_escape`
-   `safe_join`

__VidÃ©otron's Drupal Custom Twig Filter__

-   `price_one_line`

__For Storybook__

-   `json_parse` **(documentation only)**



> **Note to contributors:** Before creating a new filter, talk with DXP team to avoid conflict with DXP internal twig filters.

<br />

## More details on some filters:

<br />

### json_parse

Transfrom string passed in URL to Boolean. **Used only for documentation (Storybook)!**

```jsx
Twig.extendFilter('json_parse', function (value) {
    try {
        return JSON.parse(value);
    } catch (e) {
        return value;
    }
});
```

<br />

### format_price

**WARNING! This filter is not available**, since DXP need to be improved to accept a new filter.

```jsx
Twig.extendFilter('format_price', function (price, options) {
    const language = (options && options[0]) || 'en';
    if (language === 'fr') {
        return price + '&nbsp;$';
    } else {
        return '$' + price;
    }
});
```
