import { moduleMetadata } from '@storybook/angular';
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { TwigContainerComponent } from '../../../../utils/twig-container/twig-container.component';
import { PriceComponent } from '../angular/price.component';
import { PromotionDefaultValue } from './doc.model';

<Meta
    title="Components/Price"
    component={PriceComponent}
    decorators={[moduleMetadata({ declarations: [PriceComponent, TwigContainerComponent] })]}
    argTypes={{
        cent: {
            table: { defaultValue: { summary: '00' } },
        },
        dollar: {
            table: { defaultValue: { summary: '0' } },
        },
        fullWidth: {
            table: { defaultValue: { summary: false } },
        },
        hasAsterisk: {
            table: { defaultValue: { summary: false } },
        },
        language: {
            control: { type: 'select' },
            table: { defaultValue: { summary: 'en' } },
        },
        promotion: {
            table: {
                defaultValue: {
                    summary: "Object",
                    detail: PromotionDefaultValue
                }
            },
        },
        reversed: {
            table: { defaultValue: { summary: false } },
        },
        size: {
            control: { type: 'select' },
            table: { defaultValue: { summary: 'small' } },
        },
        dashed: {
            table: { category: 'Deprecated Inputs' },
        },
        saved: {
            table: { category: 'Deprecated Inputs' },
        },
        savedLabel: {
            table: { category: 'Deprecated Inputs' },
        },
    }}
/>

# Price

<br />

## Component API

<ArgsTable of={PriceComponent} />

## Drupal implementation example

```jsx
{% include '@bf-components/price/twig/index.twig' with {
    cent            : '99',
    class           : '',
    details         : '/month',
    dollar          : '30',
    dollarClass     : 'my-dollar-class',
    fullWidth       : false,
    hasAsterisk     : true,
    language        : 'en',
    message         : 'This is a message',
    promotion       : {
        direction       : 'horizontal',
        isDisplayed     : true,
        priceSaved      : '10',
        priceStriked    : '40,99',
        savedLabel      : 'You saved:',
        superscript     : '1',
        title           : '<b>Promotion</b> test',
    },
    reversed        : false,
    size            : 'small',
    upfront         : {
        dollar          : '0',
        label           : 'upfront',
    },
    upperTitle      : 'From',
} only %}
```

## Drupal

export const Drupal = (args) => ({
    component: TwigContainerComponent,
    props: args,
});

export const commonProps = {
    cent: '99',
    class: 'p-3',
    details: '/month',
    dollar: '30',
    dollarClass: '',
    hasAsterisk: false,
    message: 'This is a message.',
    promotion: {
        direction: 'horizontal',
        isDisplayed: true,
        priceSaved: '10',
        priceStriked: '40,99',
        savedLabel: 'You saved:',
        superscript: '1',
        title: ' <b>Promotion</b> test',
    },
    reversed: undefined,
    upfront: {
        dollar: '0',
        label: 'upfront',
    },
    upperTitle: 'Upper Title',
};

<Canvas withSource="none">
    <Story
        name="Drupal"
        height="200px"
        args={{
            elementPath: 'components/price/_doc/template.drupal',
            ...commonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none">
    <Story
        name="Drupal - All Prices"
        height="800px"
        args={{
            elementPath: 'components/price/_doc/template-all.drupal',
            ...commonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none">
    <Story
        name="Drupal - Null validator"
        height="800px"
        args={{
            elementPath: 'components/price/_doc/template-null.drupal',
            reversed: undefined,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>
