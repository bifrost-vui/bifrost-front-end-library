import { moduleMetadata } from '@storybook/angular';
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import { TwigContainerComponent } from '../../../../utils/twig-container/twig-container.component';
import { InputSearchComponent, DefaultButtonSubmitValue } from '../angular/input-search.component';
import { ButtonSubmitDefaultValue, InputDefaultValue } from './doc.model';

<Meta
    title="Components/Input Search"
    component={InputSearchComponent}
    decorators={[moduleMetadata({ declarations: [InputSearchComponent, TwigContainerComponent] })]}
    argTypes={{
        buttonSubmit: {
            table: {
                defaultValue: {
                    summary: "Object",
                    detail: ButtonSubmitDefaultValue
                }
            },
        },
        input: {
            table: {
                defaultValue: {
                    summary: "Object",
                    detail: InputDefaultValue
                }
            },
        },
        label: {
            table: {
                defaultValue: {
                    summary: "{}"
                }
            },
        },
        reversed: {
            table: { defaultValue: { summary: 'false' } },
        },
    }}
/>

# Input Search

<br />

## Component API

<ArgsTable of={InputSearchComponent} />

## Drupal implementation example

```jsx
{% include '@bf-components/input-search/twig/index.twig' with {
    buttonSubmit: {
        buttonIcon: {
            ariaLabel: "Search",
            icon: "search",
        },
        isVisible: true,
        position: "right",
    },
    class: 'class',
    hasButtonClear: true,
    input: {
        class: "p-2",
        extraAttribute: "data-demo-input-1='this is an extra attribute' data-demo-input-2='this is another extra attribute'",
        id: "searchInput",
        name: "searchInput",
        placeholder: "What are you looking for?",
        value: "search string",
    },
    isDisabled: false,
    label: {
        class: "ml-4",
        extraAttribute: "data-demo-label='this is an extra attribute'",
        text: "Label Text",
    },
    reversed: true,
} only %}
```

## Drupal

export const commonProps = {
    buttonSubmit: {
        buttonIcon: {
            ariaLabel: 'Search',
            icon: 'search',
        },
        isVisible: true,
        position: 'right',
    },
    hasButtonClear: true,
    input: {
        id: 'searchInput',
        name: 'searchInput',
        placeholder: 'What are you looking for?',
    },
}

export const Drupal = (args) => ({
    component: TwigContainerComponent,
    props: args,
});

<Canvas withSource="none">
    <Story
        name="Drupal - Default"
        height="150px"
        args={{
            elementPath: 'components/input-search/_doc/template.drupal',
            ...commonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>



<Canvas withSource="none">
    <Story
        name="Drupal - With Label"
        height="150px"
        args={{
            elementPath: 'components/input-search/_doc/template.drupal',
            ...commonProps,
            label: {
                text: 'Label',
            },
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>
