{% set isLink = href is defined
  and href is not empty
  and (isDisabled is not defined or not isDisabled)
%}
{% set hasBadge = badgeLabel is defined
  and badgeLabel
  and badgeLabel is not empty
%}

<div
  class="bf-button-icon {{ isDisabled ? "disabled" }} {{ class|default("") }}"
>
  {{ isLink ? "<a" : "<button" }}
  {% if isLink is same as(true) %}
    href="{{ href|default("#") }}"
  {% else %}
    type="button"
  {% endif %}class="bf-button-icon__inner{% if reversed %}reversed{% endif %} {% if
    isDisabled %}disabled{% endif %} {{ buttonClass|default("") }}"{% if
    isDisabled is defined and isDisabled %}
    disabled="disabled" aria-disabled="true"
  {% endif %}
  {% if label is not empty %}
    data-title="{{
      label
        |render
        |t(
          [],
          {
            langcode: "EN",
            context: "data-title-attribute"
          }
        )
    }}"
  {% endif %}
  {% if dataDismiss is defined %}
    data-dismiss="{{ dataDismiss|default(null) }}"
  {% endif %}
  {% if dataToggle is defined %}
    data-toggle="{{ dataToggle|default(null) }}"
  {% endif %}
  {% if dataTarget is defined %}
    data-target="{{ dataTarget|default(null) }}"
  {% endif %}
  {% if ariaControls is defined %}
    aria-controls="{{ ariaControls|default(null) }}"
  {% endif %}
  {% if ariaExpanded is defined %}
    aria-expanded="{{ ariaExpanded|default(null) }}"
  {% endif %}
  {% if ariaLabel is defined %}
    aria-expanded="{{ ariaLabel|default(null) }}"
  {% endif %}
  {{ extraAttribute|default(null) }}
  >{% include "@bf-components/icon/twig/index.twig" with {
    name: icon|default("placeholder"),
    size: "small"
  } only %}
  {{ isLink ? "</a" : "</button" }}>{% if hasBadge %}
    {% set badgeLabel = badgeLabel > 99 ? "+99" : badgeLabel %}
    {% include "@bf-components/badge/twig/index.twig" with {
      label: badgeLabel,
      class: "bf-button-icon__badge",
      hierarchy: "primary",
      isRounded: true
    } only %}
  {% endif %}
</div>
