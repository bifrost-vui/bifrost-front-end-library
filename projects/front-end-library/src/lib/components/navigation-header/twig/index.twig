{% if hasTopBar is defined and hasTopBar is same as (true) %}
  {% include '@bf-components/navigation-header/twig/top-bar.twig' with {
    items                   : topBar.items|default([]),
    secondaryItems          : topBar.secondaryItems|default([]),
    isConnected             : isConnected|default(false),
    accountHello            : accountHello|default('Hello'),
    accountName             : accountName|default('Benjamin Desjardins'),
    hrefLogOut              : hrefLogOut|default('#'),
    labelLogOut             : labelLogOut|default('Logout'),
    hrefConnexion           : hrefConnexion|default('#'),
    labelConnexion          : labelConnexion|default('My Customer Centre'),
    reversed                : reversed|default(false),
  } only %}
{% endif %}

<header
  role='banner'
  class='bf-header z-index-18 navbar navbar-expand-lg navbar-light
  {% if reversed is defined and reversed is same as (true) %}reversed navbar-dark{% endif %}'
  {% if theme is defined %} data-theme={{theme}} {% endif %}
>
  <nav class='bf-header__nav w-100 {{ class|default('') }}'>
    <hr class="nav-border">
    <!-- Logo -->

    <div class='bf-header__logo'>
      <a href='{{ logo.href|default('#') }}' class='d-flex'>
        {% include '@bf-components/logo/twig/index.twig' with {
          name        : logo.name,
          size        : 'large',
          langcode    : langcode|default('EN'),
        } only %}
      </a>
    </div>

    <!-- Main Nav -->
    <div class='bf-header__nav-main js-collapse-full-height navbar-collapse collapse' id="navbarBifrostMenu">
      <ul class='bf-megamenu list d-none d-lg-flex'>
        {% block navbar_content %}
          {% include '@bf-components/navigation-header/twig/mega-menu.twig' with {
            navItems    : navItems,
            reversed    : reversed
          } only %}
        {% endblock %}
      </ul>
      <ul class='bf-megamenu list d-lg-none d-sm-block'>
        {% block navbar_content %}
          {% include '@bf-components/navigation-header/twig/mega-menu-mobile.twig' with {
            navItems    : navItems,
            reversed    : reversed
          } only %}
        {% endblock %}

        {# <!-- My account Item in mobile device -->  #}
        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" href="#">
            {% include '@bf-components/icon/twig/index.twig' with {
              name    : icon|default('my-account'),
              size    : 'small',
            } only %}
            <span class="d-inline-block flex-grow-1 ml-3">
              {% if isConnected is defined and isConnected %}
                {% if loginMenuItems is defined and loginMenuItems is not empty %}
                  <span>{{ loginMenuItems.name }}
                    <small class="d-table">{{ loginMenuItems.description }}</small>
                  </span>
                {% endif %}
              {% else  %}
             {{ labelLogOut }}
            {% endif %}
              </span>
            {% include '@bf-components/icon/twig/index.twig' with {
              name        : "chevron-right",
              size        : 'small',
              class       : "",
            } %}
          </a>
        </li>
        {# <!-- Btn language --> #}
        <li class="nav-item d-flex">
          {% if langcode is defined and langcode is not empty %}
            <a
              href="{{ href|default('#') }}"
              {% if langcode is not empty %}data-title="{{ langcode|render|t([],{'langcode': 'EN','context':'data-title-attribute' }) }}"{% endif %}
              class="lang-box"
              rel="{{ rel|default('') }}"
              {{ extraAttribute|default(NULL) }}
            >
              {{ (langcode == 'EN') ? 'English' : 'Fran√ßais' }}
            </a>
          {% endif %}
        </li>
      </ul>
    </div>

    {# <!-- Search --> #}
    {% if hasNoSearchBtn is not defined or hasNoSearchBtn is same as (false) %}
      <div class='bf-header__search-bar js-bf-header__search-bar d-none d-md-block ml-1' id='navbarSearch'>
        <div class='d-flex align-items-center justify-content-between w-100'>
          {% block globalSearch %}
            {% include '@bf-components/input-search/twig/index.twig' with {
              class       : 'mb-0',
              input       : {
                placeholder : search.placeholder|default('')|t,
              },
              reversed    : reversed,
            } %}
          {% endblock %}
          {% include '@bf-components/button-icon/twig/index.twig' with {
            icon            : 'x',
            dataToggle      : 'collapse',
            dataTarget      : '#navbarSearch',
            ariaControls    : 'navbarSearch',
            ariaExpanded    : 'false',
            class           : 'd-flex d-md-none m-1 p-1'
          } only %}
        </div>
      </div>
    {% endif %}

    <!-- Actions -->
    <div class='bf-header__actions'>
      {# <!-- Btn search toggle --> #}
      {% include '@bf-components/button-icon/twig/index.twig' with {
        icon            : 'search',
        dataToggle      : 'collapse',
        dataTarget      : '#navbarSearch',
        ariaControls    : 'navbarSearch',
        ariaExpanded    : 'false',
        ariaLabel       :  (langcode == 'EN') ? 'Search' : 'Rechercher',
        class           : 'd-flex d-md-none js-bf-search-toggler'
      } only %}

      {# <!-- Right icons --> #}
      <div class="bf-header__rigth-icon-links ">
        {# <!-- rigth Icon Links - visible on mobile only --> #}
        {% for link in rigthIconLinks|default([])|slice(0, 2) %}
          {% if link is defined and link.href is not empty and link.icon is not empty %}
            {% include '@bf-components/button-icon/twig/index.twig' with {
              href    : link.href,
              icon    : link.icon,
              class   : link.class,
              badge   : (link.badge.label) ? { label : link.badge.label } : {}
            } only %}
          {% endif %}
        {% endfor %}
      </div>

      {# <!-- My Account Menu -->  #}
      {% if hasAccountBtn is defined and hasAccountBtn  %}
        <div class="dropdown d-none d-lg-block {{ (isConnected) ? 'login' : 'logout' }}">
          <a class="btn btn-tertiary dropdown-toggle {{ (isConnected) ? 'login' : 'logout' }}" href="#" role="button" id="dropdownAccountMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {% include '@bf-components/icon/twig/index.twig' with {
              name    : icon|default('my-account')
            } only %}
            {{ (isConnected) ? labelLogIn : labelLogOut }}
          </a>
        {% if isConnected is same as (true) %}
          <div class="dropdown-menu" aria-labelledby="dropdownAccountMenu">
            {% for item in menuItemAccount %}
              {% if item.label is defined and item.label and item.href  is defined and item.href %}
                <a class="dropdown-item d-flex flex-wrap flex-column" href="{{ item.href }}">
                  {% if item.iconName is defined and item.label %}
                    <div class="d-flex align-items-center">
                      {% include '@bf-components/icon/twig/index.twig' with {
                        name     : item.iconName,
                        class    : ''
                      } only %}
                      <span class="d-lg-inline-block ml-1">{{ item.label }}</span>
                    </div>
                  {% endif %}
                  {% if item.description is defined and item.description %}
                    <span class="description">{{ item.description }}</span>
                  {% endif %}
                </a>
              {% endif %}
            {% endfor %}
            <a class="dropdown-item" href="#">
              {% include '@bf-components/icon/twig/index.twig' with {
                name    : icon|default('my-account')
              } only %}
              {{ labelLogOut }}
            </a>
          </div>
        {% endif %}
        </div>
      {% endif %}

      {# <!-- Btn mini cart --> #}
      {% if hasCartBtn is defined and hasCartBtn %}
        {% if cartBtn.badge is defined and cartBtn.badge and cartBtn.badge is not same as ('0') %}
          {% set badgeLabel =  cartBtn.badge %}
        {% endif %}
        {% include '@bf-components/button-icon/twig/index.twig' with {
          icon        : 'cart',
          hierarchy   : 'primary',
          badge       : (badgeLabel is defined) ? badgeLabel : NULL,
          href        : (cartBtn.href is defined and cartBtn.href) ? cartBtn.href : '',
          ariaLabel   : cartBtn.ariaLabel|default('')
        } only %}
      {% endif %}

      {# <!-- Btn language --> #}
      {% if langcode is defined and langcode is not empty %}
        {% include '@bf-components/link/twig/index.twig' with {
          href    : '',
          label   : (langcode == 'EN') ? 'EN' : 'FR',
          class   : 'nav-langcode d-none d-lg-block'
        } only %}
      {% endif %}

      {# <!-- Btn burger --> #}
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarBifrostMenu" data-parent="#navbarBifrostMenu" aria-controls="navbarBifrost" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

  {# <!-- Alogolia search results-->  #}
  {% if hasNoSearchBtn is not defined or hasNoSearchBtn is same as (false) %}
    <div class='align-items-center justify-content-between w-100'>
      <div id='alg-hits' class='ais-Hits bf-color-bg-ground alg-hidden'></div>
    </div>
  {% endif %}
</header>
