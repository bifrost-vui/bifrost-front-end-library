import { moduleMetadata } from '@storybook/angular';
import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import illustrationIcons from '../../../../../../../public/icons/list/illustrations.json';
import { contentLists, contentListsWithChannels, contentListsNoTitle } from './data';
import { TwigContainerComponent } from '../../../../utils/twig-container/twig-container.component';
import { CardComponent } from '../angular/card.component';

<Meta
    title="Components/Card"
    component={CardComponent}
    decorators={[moduleMetadata({ declarations: [CardComponent, TwigContainerComponent] })]}
    argTypes={{
        _cardVariant: {
            table: { disable: true },
        },
        titleTag: {
            table: { defaultValue: { summary: 'h1' } },
        },
        isDisabled: {
            table: { defaultValue: { summary: false } },
        },
        iconName: {
            defaultValue: '',
            control: {
                type: 'select',
                options: [
                    '',
                    'placeholder',
                    ...illustrationIcons
                        .map((a) => a.list)
                        .flat()
                        .sort(),
                ],
            },
        },
        language: {
            table: { category: 'Deprecated Inputs' },
        },
    }}
/>

# Card

<br />

## Component API

<ArgsTable of={CardComponent} />

## API Props Availability per Card Type

It is not all API props that are available in each card type.

This table below lists all props [found above](#component-api)
and for each card type it displays a checkmark if the prop is available.

| Prop Name                       | Plan | Phone | Protection | Increment | Combo |
| ------------------------------- | :--: | :---: | :--------: | :-------: | :---: |
| buttons                         |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| class                           |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| comboLabel                      |      |       |            |           |   ✓   |
| contentBadges                   |      |   ✓   |            |           |   ✓   |
| contentLists                    |  ✓   |   ✓   |     ✓      |     ✓     |       |
| description_html                |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| detailsColors                   |      |   ✓   |            |           |       |
| detailsStorage                  |      |   ✓   |            |           |       |
| headerCustomBgColor             |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| headerCustomFontColor           |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| headerPromoBadge                |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| headerPromoBadgeCustomBgColor   |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| headerPromoBadgeCustomFontColor |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| iconName                        |      |       |     ✓      |     ✓     |       |
| id                              |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| image                           |      |   ✓   |            |           |   ✓   |
| imageBadgeIcon                  |      |   ✓   |            |           |   ✓   |
| imageBadgeIconFullSize          |      |   ✓   |            |           |   ✓   |
| inputIncrement                  |      |       |            |     ✓     |       |
| isDisabled                      |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| language (DEPRECATED)           |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| link                            |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| message                         |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| messageLink                     |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| note                            |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| price                           |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| promotionBadges                 |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| subtitle                        |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| title                           |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| titleTag                        |  ✓   |   ✓   |     ✓      |     ✓     |   ✓   |
| upperTitle                      |  ✓   |   ✓   |     ✓      |           |   ✓   |
| visualBackgroundColor           |      |   ✓   |     ✓      |           |   ✓   |

## Drupal implementation example

```jsx
// There are many kinds of Cards:
{% include '@bf-components/card/twig/plan.twig' with {...} %}
{% include '@bf-components/card/twig/phone.twig' with {...} %}
{% include '@bf-components/card/twig/protection.twig' with {...} %}

// Card Plan example:
{% include '@bf-components/card/twig/plan.twig' with {
    buttons: [
        {
            hierarchy: 'primary-alt',
            href: 'https://www.videotron.com',
            label: 'Add a phone with this plan',
        },
        {
            hierarchy: 'tertiary',
            href: 'https://www.videotron.com',
            label: 'BUY only this PLAN',
        }
    ],
    class: '',
    contentLists: [
        {
            content: [
                {
                    icon: 'unlimited',
                    label: 'Free and Unlimited Go after 10Go',
                },
                {
                    icon: 'support',
                    label: '100 GB annual data in Canada',
                },
                {
                    icon: 'forfait-tv-le-fan-de-films-et-series',
                    label: 'Club illico included',
                },
            ],
            description: '40 channels',
            title: 'TV',
        },
        {
            content: [
                {
                    icon: 'forfait-tv-le-fan-de-films-et-series',
                    label: 'Utilisation illimité',
                },
                {
                    icon: 'forfait-tv-le-fan-de-films-et-series',
                    label: 'Vitesse de téléchargement jusqu\'à 100mbit/s',
                },

            ],
            description: 'Unlimited',
            title: 'Internet',
        }
    ],
    description_html: '<p>Empty <i>description</i> property to display this <strong>html content</strong>.</p>',
    headerCustomBgColor: '#ff0000',
    headerCustomFontColor: '#ffffff',
    headerPromoBadge: {
        hierarchy: 'primary',
        label: 'PROMOTION',
        noUppercase: false,
    },
    headerPromoBadgeCustomBgColor: '#ff0000',
    headerPromoBadgeCustomFontColor: '#ffffff',
    id: 'uniqueID',
    isDisabled: false,
    link: {
        href: 'https://www.videotron.com',
        label: 'Learn more',
    },
    message: 'Only plans with a minimum of $40.00 per month are available with that phone.',
    price: {
        cent: '99',
        details: '/month',
        dollar: '86',
        language: 'en',
        promotion: {
            direction: 'horizontal',
            priceSaved: '10.00',
            priceStriked: '40.99',
            savedLabel: 'You saved :',
            superscript: '1',
            title: '<b>Promotion</b> test',
        },
        upperTitle: 'From',
    },
    promotionBadges: [
        {
            iconName: '',
            label:'Free Galaxy Buds Live',
        },
        {
            iconName: 'credit-welcome',
            label: '0$ Welcome credit',
        }
    ],
    subtitle: 'Lorem ipsum subtitle',
    title: {
        category: 'CellPhone plan',
        detail: '40GB - All inclusive Canada'
    },
    upperTitle: 'upperTitle',
} only %}

// Card Phone example:
{% include '@bf-components/card/twig/phone.twig' with {
    ...
    contentBadges: [{
        iconName: '',
        label: 'Lorem Ipsum',
    }],
    detailsColors: [
        {
            name: 'Lorem',
            value:'4B4A46',
        },
        {
            name: 'Ipsum',
            value:'2C4651',
        },
        {
            name: 'Dolor',
            value:'D4BBA5',
        },
        {
            name: 'Amet',
            value:'C0C0C0',
        },
    ],
    detailsStorage: [
        '128 Go',
        '256 Go'
    ],
    image: {
        alt: 'iPhone 12 Mini',
        badgeIconName: 'security',
        src: '/images/_docs/iphone-12-pro-max.png',
    },
    messageLink: {
        class: '',
        href: '',
        label: 'Choose another Plan',
    },
    title: 'iPhone 12 Mini',
    ...
} only %}

// Card Combo example:
{% include '@bf-components/card/twig/combo.twig' with {
    ...
    comboLabel: '250 Go',
    image: {
        alt: 'iPhone 12 Mini',
        src: '/images/_docs/iphone-12-pro-max.png',
    },
    subtitle: 'Lorem ipsum subtitle',
    title: 'iPhone 12 Mini',
    ...
} only %}
```

## Drupal block override implementation example

To override available block you need to embed the main index.twig

```jsx
{% embed '@bf-components/card/twig/index.twig' with {
    class: 'm-3',
    contentLists: contentLists,
    description_html: '<p>Empty <i>description</i> property to display this <strong>html content</strong>.</p>',
    headerPromoBadge: {
        label: 'PROMOTION',
    },
    id: 'uniqueID',
    isDisabled: false,
    link: {
        label: 'Learn more',
        href: 'https://www.videotron.com',
    },
    message: 'Only plans with a minimum of $40.00 per month are available with that phone.',
    price: {
        cent: '99',
        details: '/month',
        dollar: '86',
        language: 'en',
        promotion: {
            direction: 'horizontal',
            priceSaved: '10.00',
            priceStriked: '40.99',
            savedLabel: 'You saved :',
            superscript  '1',
            title: '<b>Promotion</b> test',
        },
        upperTitle: 'From',
    },
    title: 'All-Inclusive 12 GB Mobile',
    upperTitle: 'upperTitle',
} %}
    {% block card_body %}
        ..override of the block..
    {% endblock %}
    {% block buttons %}
        ..override of the block..
    {% endblock %}
{% endembed %}
```

## Drupal

export const customColorsProps = {
    headerCustomBgColor: 'midnightblue',
    headerCustomFontColor: 'goldenrod',
    headerPromoBadgeCustomBgColor: 'goldenrod',
    headerPromoBadgeCustomFontColor: 'midnightblue',
};

### Plan card

export const commonProps = {
    buttons: [
        {
            label: 'Add a phone with this plan',
            hierarchy: 'primary-alt',
            href: 'https://www.videotron.com',
        },
        {
            label: 'BUY only this PLAN',
            hierarchy: 'tertiary',
            href: 'https://www.videotron.com',
        },
    ],
    contentLists: contentLists,
    description_html: '<p>Empty <i>description</i> property to display this <strong>html content</strong>.</p>',
    headerPromoBadge: {
        label: 'PROMOTION',
    },
    isDisabled: false,
    link: {
        label: 'Learn more',
        href: 'https://www.videotron.com',
    },
    message: 'Only plans with a minimum of $40.00 per month are available with that phone.',
    price: {
        upperTitle: 'From',
        dollar: '86',
        cent: '99',
        details: '/month',
        language: 'en',
        promotion: {
            title: '<b>Promotion</b> test',
            priceStriked: '40.99',
            priceSaved: '10.00',
            savedLabel: 'You saved :',
            superscript: '1',
            direction: 'horizontal',
        },
    },
    promotionBadges: [
        {
            label: 'Free Galaxy Buds Live',
            iconName: '',
        },
        {
            label: '0$ Welcome credit',
            iconName: 'credit-welcome',
        },
    ],
    subtitle: 'Lorem ipsum subtitle',
    title: 'All-Inclusive 12 GB Mobile',
    upperTitle: 'upperTitle',
};

export const Drupal = (args) => ({
    component: TwigContainerComponent,
    props: {
        elementPath: 'components/card/_doc/template.drupal',
        ...args,
    },
});

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Plan"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            ...commonProps,
            _cardVariant: 'plan',
            title: {
                category: 'CellPhone plan',
                detail: '40GB - All inclusive Canada',
            },
            isDisabled: false,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Plan Disabled"
        args={{
            ...commonProps,
            _cardVariant: 'plan',
            title: {
                category: 'CellPhone plan',
                detail: '40GB - All inclusive Canada',
            },
            isDisabled: true,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Plan Selected"
        args={{
            ...commonProps,
            _cardVariant: 'plan',
            upperTitle: undefined,
            title: {
                category: 'CellPhone plan',
                detail: '40GB - All inclusive Canada',
            },
            contentLists: contentListsNoTitle,
            buttons: [
                {
                    label: 'Choose this plan',
                    hierarchy: 'primary-alt',
                    href: 'https://www.videotron.com',
                },
            ],
            message: undefined,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Plan w/ channels"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            ...commonProps,
            _cardVariant: 'plan',
            buttons: [
                {
                    label: 'Check the availability',
                    hierarchy: 'primary-alt',
                    href: 'https://www.videotron.com',
                },
            ],
            contentLists: contentListsWithChannels,
            description_html: undefined,
            headerPromoBadge: {
                hierarchy: 'secondary',
                label: 'POPULAR OFFER',
            },
            link: undefined,
            message: undefined,
            note: '<a href="https://www.videotron.com" class="bf-link bf-link--native">Terms and conditions</a>',
            price: {
                details: '/month',
                dollar: '115',
                language: 'en',
                message: 'One Helix Fi gateway and one Helix TV terminal included*',
                promotion: undefined,
            },
            promotionBadges: undefined,
            subtitle: undefined,
            title: {
                category: 'Duo',
                detail: 'TV 5 choices + Internet GIGA',
            },
            upperTitle: undefined,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Plan - Custom colors"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'plan',
            ...commonProps,
            ...customColorsProps,
            isDisabled: false,
            title: {
                category: 'CellPhone plan',
                detail: '40GB - All inclusive Canada',
            },
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

### Phone card

export const phoneCommonProps = {
    buttons: [
        {
            hierarchy: 'primary-alt',
            href: 'https://www.videotron.com',
            label: 'Configurate',
        },
    ],
    contentBadges: [
        {
            iconName: 'credit-return',
            label: 'credit return',
        },
        {
            iconName: 'check-circle-outline',
            label: 'refurbish available',
        },
    ],
    detailsColors: [
        { name: 'Lorem', value: '4B4A46' },
        { name: 'Ipsum', value: '2C4651' },
        { name: 'Dolor', value: 'D4BBA5' },
        { name: 'Amet', value: 'C0C0C0' },
    ],
    detailsStorage: ['128 Go', '256 Go'],
    headerPromoBadge: {
        label: 'Promotion',
    },
    image: {
        alt: 'iPhone 12 Mini',
        badgeIconName: 'security',
        src: '/images/_docs/iphone-12-pro-max.png',
    },
    note: 'Plan + Phone: from $150/month (24 months)<br/>No upfront payment',
    price: {
        cent: '99',
        details: '/month',
        dollar: '86',
        language: 'en',
        promotion: {
            direction: 'horizontal',
            priceSaved: '10.00',
            priceStriked: '40.99',
            savedLabel: 'You saved :',
            superscript: '1',
            title: '<b>Promotion</b> test',
        },
        upperTitle: 'From',
    },
    promotionBadges: [
        {
            iconName: '',
            label: 'Free Galaxy Buds Live',
        },
        {
            iconName: 'credit-welcome',
            label: '0$ Welcome credit',
        },
    ],
    subtitle: 'Discover the power of the phone',
    title: 'iPhone 12 Mini',
    visualBackgroundColor: '',
};

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Phone"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'phone',
            ...phoneCommonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Phone Disabled"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'phone',
            ...phoneCommonProps,
            isDisabled: true,
            message: 'Not available with this plan.',
            messageLink: {
                href: 'https://www.videotron.com',
                label: 'Choose another Plan',
                class: '',
            },
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Phone - Custom colors"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'phone',
            ...phoneCommonProps,
            ...customColorsProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

### Protection card

export const protectionCommonProps = {
    buttons: [
        {
            hierarchy: 'primary-alt',
            href: 'https://www.videotron.com',
            label: 'Add this protection',
        },
    ],
    headerPromoBadge: {
        label: 'Promotion',
    },
    iconName: 'apple',
    message: 'Lorem ipsum dolor this protection.',
    price: {
        cent: '99',
        details: '/month',
        dollar: '86',
        language: 'en',
        promotion: {
            direction: 'horizontal',
            priceSaved: '10.00',
            priceStriked: '40.99',
            savedLabel: 'You saved :',
            superscript: '1',
            title: '<b>Promotion</b> test',
        },
        upperTitle: 'From',
    },
    promotionBadges: [
        {
            iconName: '',
            label: 'Free Galaxy Buds Live',
        },
        {
            iconName: 'credit-welcome',
            label: '0$ Welcome credit',
        },
    ],
    subtitle: 'Lorem ipsum subtitle',
    title: 'Apple Care+ for iPhone',
    visualBackgroundColor: '',
};

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Protection"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'protection',
            ...protectionCommonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Protection - Custom colors"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'protection',
            ...protectionCommonProps,
            ...customColorsProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

### Increment card

export const incrementCommonProps = {
    buttons: [
        {
            hierarchy: 'primary-alt',
            href: 'https://www.videotron.com',
            label: 'Add to plan',
        },
    ],
    description_html: '<p>Empty <i>description</i> property to display this <strong>html content</strong>.</p>',
    inputIncrement: {
        ariaLabel: 'my aria-label',
        errorMessage: 'Value should be between 0 and 5',
        inputId: 'my-input-id',
        min: 0,
        max: 5,
        value: 0,
    },
    message: 'Lorem ipsum dolor this message.',
    price: {
        cent: '99',
        details: '/month',
        dollar: '86',
        language: 'en',
        promotion: {
            direction: 'horizontal',
            priceSaved: '10.00',
            priceStriked: '40.99',
            savedLabel: 'You saved :',
            superscript: '1',
            title: '<b>Promotion</b> test',
        },
        upperTitle: 'From',
    },
    promotionBadges: [
        {
            iconName: '',
            label: 'Free Galaxy Buds Live',
        },
        {
            iconName: 'credit-welcome',
            label: '0$ Welcome credit',
        },
    ],
    subtitle: 'Lorem ipsum subtitle',
    title: 'Label Ipsum',
};

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Increment"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'increment',
            ...incrementCommonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Increment - Custom colors"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'increment',
            ...incrementCommonProps,
            ...customColorsProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

### Combo card

export const comboCommonProps = {
    buttons: [
        {
            hierarchy: 'primary-alt',
            href: 'https://www.videotron.com',
            label: 'Configurate',
        },
    ],
    comboLabel: '250 Go',
    contentBadges: [
        {
            iconName: 'credit-return',
            label: 'credit return',
        },
        {
            iconName: 'check-circle-outline',
            label: 'refurbish available',
        },
    ],
    headerPromoBadge: {
        label: 'Promotion',
    },
    image: {
        alt: 'iPhone 12 Mini',
        src: '/images/_docs/iphone-12-pro-max.png',
    },
    note: 'Plan + Phone: from $150/month (24 months)<br/>No upfront payment',
    price: {
        cent: '99',
        details: '/month',
        dollar: '86',
        language: 'en',
        promotion: {
            direction: 'horizontal',
            priceSaved: '10.00',
            priceStriked: '40.99',
            savedLabel: 'You saved :',
            superscript: '1',
            title: '<b>Promotion</b> test',
        },
        upperTitle: 'From',
    },
    promotionBadges: [
        {
            iconName: '',
            label: 'Free Galaxy Buds Live',
        },
        {
            iconName: 'credit-welcome',
            label: '0$ Welcome credit',
        },
    ],
    subtitle: 'Discover the power of the phone',
    title: 'iPhone 12 Mini',
    visualBackgroundColor: '',
};

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Combo"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'combo',
            ...comboCommonProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

<Canvas withSource="none" style={{ height: '900px' }}>
    <Story
        name="Drupal - Combo - Custom colors"
        args={{
            elementPath: 'components/card/_doc/template.drupal',
            _cardVariant: 'combo',
            ...comboCommonProps,
            ...customColorsProps,
        }}
    >
        {Drupal.bind({})}
    </Story>
</Canvas>

## More info

https://www.figma.com/file/7bTmk29aCBl7rCFszffYPr/DS---Components-%26-styles?node-id=6113%3A705
